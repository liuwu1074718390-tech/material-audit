# 如何查看服务器日志

## 问题
终端没有显示错误信息，可能是因为服务器在后台运行。

## 解决方案

### 方法 1: 在前台运行服务器（推荐）

**步骤**：
1. 停止当前后台运行的服务器：
   ```bash
   cd /Users/liuwu/Desktop/材价审计
   pkill -f "npm run dev"
   pkill -f "nuxt dev"
   ```

2. 在前台启动服务器：
   ```bash
   npm run dev
   ```

3. 这样所有日志都会显示在终端中，包括错误信息。

4. 测试创建任务时，终端会实时显示所有日志。

### 方法 2: 使用启动脚本

运行我创建的脚本：
```bash
cd /Users/liuwu/Desktop/材价审计
./启动服务器并查看日志.sh
```

### 方法 3: 查看日志文件

如果服务器在后台运行，可以查看日志文件：

```bash
# 查看 Dify 处理日志
tail -f /Users/liuwu/Desktop/材价审计/dify-debug.log

# 或者查看最近的日志
tail -100 /Users/liuwu/Desktop/材价审计/dify-debug.log
```

### 方法 4: 检查系统日志

macOS 可能会将某些日志输出到系统日志：

```bash
# 查看系统日志（如果有权限）
log show --predicate 'process == "node"' --last 5m
```

## 推荐操作

**最简单的方法**：

1. **打开一个新的终端窗口**

2. **运行以下命令**：
   ```bash
   cd /Users/liuwu/Desktop/材价审计
   npm run dev
   ```

3. **保持这个终端窗口打开**，所有日志都会显示在这里

4. **在浏览器中测试创建任务**

5. **观察终端输出**，应该能看到：
   - `[API] 收到审计请求`
   - `[TaskManager] 开始创建任务`
   - 如果有错误，会显示详细的错误信息

## 如果还是看不到日志

可能的原因：
1. 服务器没有真正启动
2. 日志被重定向到其他地方
3. 错误被静默捕获

**检查方法**：
```bash
# 检查服务器是否在运行
ps aux | grep "nuxt dev" | grep -v grep

# 检查端口是否被占用
lsof -i :3000

# 测试服务器是否响应
curl http://localhost:3000/api/health/db
```

## 下一步

请按照"推荐操作"在前台启动服务器，然后：
1. 尝试创建任务
2. 观察终端输出
3. 把看到的错误信息发给我

